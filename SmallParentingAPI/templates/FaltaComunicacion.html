{% load static %}
<!DOCTYPE html>
<html>
<head>
  <title>FALTA DE COMUNICACION</title>
  <link rel="stylesheet" type="text/css" href="{% static 'CSS/chat_FDC.css' %}">  
</head>
<body>
  <h1>FALTA DE COMUNICACION</h1>
  <form id="formulario" method="POST" action="">
    <label for="perfil_hijo">Seleccionar perfil del hijo:</label>
    <select id="perfil_hijo" name="perfil_hijo">
      <option value="">Ningún perfil de hijo creado</option>
      {% for hijo in hijos %}
        <option value="{{ hijo.id }}">{{ hijo.nombre }}</option>
      {% endfor %}
    </select>
    <div class="form-group additional-fields" id="p1">
      <label for="p1">1. ¿Sientes que hay dificultades para establecer una comunicación efectiva con tu hijo sobre sus problemas educativos?</label><br>
      <select id="p1" name="p1">
        <option id="p1" name="p1" value="Sí, hay dificultades significativas para comunicarnos">Sí, hay dificultades significativas para comunicarnos</option>
        <option id="p1" name="p1" value="Sí, a veces es difícil, pero podemos resolverlo">Sí, a veces es difícil, pero podemos resolverlo</option>
        <option id="p1" name="p1" value="No, nuestra comunicación es fluida y abierta">No, nuestra comunicación es fluida y abierta</option>
        <option id="p1" name="p1" value="No estoy seguro/a">No estoy seguro/a</option>
      </select>
    </div>
    <div id="p2">
      <label for="p2">2. ¿Has intentado alguna estrategia o recurso para mejorar la comunicación con tu hijo acerca de sus problemas educativos?</label><br>
      <select id="p2" name="p2">
        <option id="p2" name="p2" value="Sí, he buscado consejos en libros o recursos en línea">Sí, he buscado consejos en libros o recursos en línea</option>
        <option id="p2" name="p2" value="Sí, hemos buscado ayuda profesional de un terapeuta o consejero">Sí, hemos buscado ayuda profesional de un terapeuta o consejero</option>
        <option id="p2" name="p2" value="Sí, hemos participado en talleres o programas de capacitación">Sí, hemos participado en talleres o programas de capacitación</option>
        <option id="p2" name="p2" value="No, aún no hemos intentado ninguna estrategia específica">No, aún no hemos intentado ninguna estrategia específica</option>
      </select>
    </div>
    <div id="p3">
      <label for="p3">3. ¿Consideras que el entorno familiar influye en la comunicación con tu hijo sobre sus problemas educativos?</label><br>
      <select id="p3" name="p3">
        <option id="p3" name="p3" value="Sí, creo que el ambiente familiar puede afectar la comunicación">Sí, creo que el ambiente familiar puede afectar la comunicación</option>
        <option id="p3" name="p3" value="Sí, pero no estoy seguro/a de cómo influye exactamente">Sí, pero no estoy seguro/a de cómo influye exactamente</option>
        <option id="p3" name="p3" value="No, no creo que el entorno familiar tenga un impacto significativo">No, no creo que el entorno familiar tenga un impacto significativo</option>
        <option id="p3" name="p3" value="No estoy seguro/a">No estoy seguro/a</option>
      </select>
    </div>
    <div id="p4">
      <label for="p4">4. ¿Tu hijo muestra resistencia o evita hablar sobre sus problemas educativos?</label><br>
      <select id="p4" name="p4">
        <option id="p4" name="p4" value="Sí, muestra resistencia constante y evita el tema">Sí, muestra resistencia constante y evita el tema</option>
        <option id="p4" name="p4" value="A veces muestra resistencia, pero podemos abordarlo de alguna manera">A veces muestra resistencia, pero podemos abordarlo de alguna manera</option>
        <option id="p4" name="p4" value="No, mi hijo está dispuesto/a a hablar sobre sus problemas educativos">No, mi hijo está dispuesto/a a hablar sobre sus problemas educativos</option>
        <option id="p4" name="p4" value="No estoy seguro/a">No estoy seguro/a</option>
      </select>
    </div>
    <div id="p5">
      <label for="p5">5. ¿Has intentado establecer momentos específicos para conversar con tu hijo sobre sus problemas educativos?</label><br>
      <select id="p5" name="p5">
        <option id="p5" name="p5" value="Sí, hemos establecido horarios regulares para hablar al respecto">Sí, hemos establecido horarios regulares para hablar al respecto</option>
        <option id="p5" name="p5" value="Sí, pero no siempre logramos mantener esos momentos de conversación">Sí, pero no siempre logramos mantener esos momentos de conversación</option>
        <option id="p5" name="p5" value="No, no hemos establecido momentos específicos para abordar el tema">No, no hemos establecido momentos específicos para abordar el tema</option>
        <option id="p5" name="p5" value="No estoy seguro/a">No estoy seguro/a</option>
      </select>
    </div>
    <div id="p6">
        <label for="p6">Cuentanos las experiencias que hayas tenido (opcional)</label><br>
        <textarea id="p6" name="p6" rows="4" cols="50"></textarea><br>
    </div>
    <input type="hidden" id="perfil_hijo_seleccionado" name="perfil_hijo_seleccionado" value="">
    <a href="{% url 'inicio' %}">Volver a la pantalla de inicio</a>
    <form id="myform" onsubmit="submitForm();">
        {% csrf_token %}
        <input type="hidden" name="hiddenMessage" id="hiddenMessage">
        <button type="submit">Enviar</button>
    </form>
  </form>
  <div id="loading-overlay">
    <div id="loading-indicator"></div>
    <div id="loading-message">Enviando datos, espere un momento...</div>
  </div>
  <script>
    function showLoadingOverlay() {
      document.getElementById('loading-overlay').style.display = 'flex';
    }

    // Función para ocultar el overlay de carga
    function hideLoadingOverlay() {
      document.getElementById('loading-overlay').style.display = 'none';
    }

    // Agregar el evento 'submit' al formulario y mostrar el overlay cuando se envíe
    document.getElementById('formulario').addEventListener('submit', function() {
      showLoadingOverlay();
    });
    function submitForm() {
        // Obtener el mensaje del formulario
        var message = document.getElementById('message').value;

        // Construir el objeto de mensaje
        var chatMessage = {
            role: 'user',
            content: message
        };

        // Convertir el objeto de mensaje en una cadena JSON
        var chatMessageJSON = JSON.stringify(chatMessage);

        // Guardar el mensaje en el almacenamiento local
        localStorage.setItem('chatMessage', chatMessageJSON);
        }
</script>
</body>
</html>
